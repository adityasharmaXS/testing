apiVersion: v1
items:
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 3
    labels:
      app: cache-service
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: cache-service
    namespace: dataworks
    resourceVersion: "743967"
    uid: 623f3dec-697e-4e09-93e1-8db390f3abba
  spec:
    podManagementPolicy: OrderedReady
    replicas: 0
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: cache-service
        tier: dataworks
    serviceName: cache-service
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: cache-service
          tier: dataworks
      spec:
        containers:
        - env:
          - name: CACHE_STORAGE
            value: /data/cache
          image: dwproductioncentralus.azurecr.io/cache-service:1.0.5
          imagePullPolicy: Always
          name: cache-service
          resources:
            limits:
              cpu: "2"
              memory: 2000Mi
            requests:
              cpu: 200m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data
            name: data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentRevision: cache-service-66c79f4c6c
    observedGeneration: 3
    replicas: 0
    updateRevision: cache-service-66c79f4c6c
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"job-manager","tier":"dataworks"},"name":"job-manager","namespace":"dataworks"},"spec":{"replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"job-manager","tier":"dataworks"}},"serviceName":"job-manager","template":{"metadata":{"labels":{"app":"job-manager","tier":"dataworks"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"3335"},{"name":"REDIS_HOST","value":"redis"},{"name":"REDIS_PORT","value":"80"}],"image":"dwproductionus.azurecr.io/jobmanager:v1.0.6","imagePullPolicy":"Always","name":"job-manager","ports":[{"containerPort":3335,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 6
    labels:
      app: job-manager
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: job-manager
    namespace: dataworks
    resourceVersion: "753884"
    uid: bcb33572-36ee-42f4-aca3-547f28aebbf6
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: job-manager
        tier: dataworks
    serviceName: job-manager
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: job-manager
          tier: dataworks
      spec:
        containers:
        - env:
          - name: PORT
            value: "3335"
          - name: REDIS_HOST
            value: redis
          - name: REDIS_PORT
            value: "80"
          - name: MAX_QUEUE_BUFFER_COUNT
            value: "2000"
          image: dwproductioncentralus.azurecr.io/jobmanager:v1.0.26.16
          imagePullPolicy: Always
          name: job-manager
          ports:
          - containerPort: 3335
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: job-manager-545f6f96bc
    observedGeneration: 6
    readyReplicas: 1
    replicas: 1
    updateRevision: job-manager-545f6f96bc
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"jobfactory","tier":"dataworks"},"name":"jobfactory","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"jobfactory","tier":"dataworks"}},"serviceName":"jobfactory","template":{"metadata":{"creationTimestamp":null,"labels":{"app":"jobfactory","tier":"dataworks"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"3334"},{"name":"PULSAR_HOST","value":"pulsar:6650"},{"name":"DASHBOARD_HOST","value":"meritdashboard"},{"name":"OUTPUT_STORAGE","value":"/data/csv"},{"name":"FILE_SHARE","value":"/data/files"},{"name":"OUTPUT_FACTORY_HOST","value":"http://outputfactory"},{"name":"REDIS_HOST","value":"redis"},{"name":"REDIS_PORT","value":"80"}],"image":"dwproductionus.azurecr.io/merit-jobfactory:v1.25.4","imagePullPolicy":"Always","name":"jobfactory","ports":[{"containerPort":3334,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"azureFile":{"secretName":"dwk8sdatastorage-secret","shareName":"data"},"name":"data"}]}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 5
    labels:
      app: jobfactory
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: jobfactory
    namespace: dataworks
    resourceVersion: "747135"
    uid: 639aca41-8139-4a59-86f3-7051ade5db82
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: jobfactory
        tier: dataworks
    serviceName: jobfactory
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: jobfactory
          tier: dataworks
      spec:
        containers:
        - env:
          - name: HTTP_PORT
            value: "3334"
          - name: GRPC_PORT
            value: "53334"
          - name: MONGO_HOST
            value: mongodb
          - name: MONGO_PORT
            value: "27017"
          - name: MONGO_DB
            value: merit
          - name: PULSAR_HOST
            value: pulsar:6650
          - name: DASHBOARD_HOST
            value: meritdashboard
          - name: OUTPUT_STORAGE
            value: /data/csv
          - name: FILE_SHARE
            value: /data/files
          - name: CACHE_STORAGE
            value: /data/cache
          - name: OUTPUT_FACTORY_HOST
            value: http://outputfactory
          - name: REDIS_HOST
            value: redis
          - name: REDIS_PORT
            value: "80"
          - name: REDIS_EXPIRATION
            value: "1440"
          - name: DATA_MANAGEMENT_SERVICE
            value: http://configdatamanagementservice
          - name: CRUD_SERVICE
            value: configdatamanagementservice
          - name: CRUD_PORT
            value: "53001"
          image: dwproductioncentralus.azurecr.io/merit-jobfactory:v1.25.61
          imagePullPolicy: Always
          name: jobfactory
          ports:
          - containerPort: 80
            protocol: TCP
          - containerPort: 53334
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
            requests:
              cpu: 50m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data
            name: data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: jobfactory-67bb566c79
    observedGeneration: 5
    readyReplicas: 1
    replicas: 1
    updateRevision: jobfactory-67bb566c79
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"jupyterlab","tier":"dataworks"},"name":"jupyterlab","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"jupyterlab","tier":"dataworks"}},"serviceName":"jupyterlab","template":{"metadata":{"labels":{"app":"jupyterlab","tier":"dataworks"}},"spec":{"containers":[{"image":"dwproduction.azurecr.io/jupyterlab:1.0.0","imagePullPolicy":"Always","name":"jupyterlab","ports":[{"containerPort":8888,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/usr/local/bin/dataworks","name":"jupyterlab-data"}]}],"dnsPolicy":"ClusterFirst","volumes":[{"name":"jupyterlab-data","persistentVolumeClaim":{"claimName":"jupyterlab-data"}}]}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 2
    labels:
      app: jupyterlab
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: jupyterlab
    namespace: dataworks
    resourceVersion: "744189"
    uid: ba1cdf0e-8e5c-405f-8e96-4cf0289a9cc0
  spec:
    podManagementPolicy: OrderedReady
    replicas: 0
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: jupyterlab
        tier: dataworks
    serviceName: jupyterlab
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: jupyterlab
          tier: dataworks
      spec:
        containers:
        - image: dwproductionus.azurecr.io/jupyterlab:1.0.0
          imagePullPolicy: Always
          name: jupyterlab
          ports:
          - containerPort: 8888
            protocol: TCP
          resources:
            limits:
              cpu: "2"
              memory: 2000Mi
            requests:
              cpu: 200m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /usr/local/bin/dataworks
            name: jupyterlab-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - name: jupyterlab-data
          persistentVolumeClaim:
            claimName: jupyterlab-data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentRevision: jupyterlab-54fff44bcb
    observedGeneration: 2
    replicas: 0
    updateRevision: jupyterlab-54fff44bcb
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"meritdashboard","tier":"dataworks"},"name":"meritdashboard","namespace":"dataworks"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"meritdashboard","tier":"dataworks"}},"serviceName":"meritdashboard","template":{"metadata":{"labels":{"app":"meritdashboard","tier":"dataworks"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"3001"},{"name":"MONGO_HOST","value":"mongodb"},{"name":"MONGO_PORT","value":"27017"},{"name":"MONGO_DB","value":"merit"},{"name":"PROXIES_FILE","value":"app/proxies.txt"},{"name":"DASHBOARD_HOST","value":"http://dashboard"},{"name":"CASSANDRA_HOST","value":"cassandra"},{"name":"CASSANDRA_KEYSPACE","value":"dataworks"},{"name":"MAX_GOROUTINES","value":"50"},{"name":"PULSAR_HOST","value":"pulsar:6650"},{"name":"FILE_SHARE","value":"/data/files"},{"name":"WS_HOST","value":"\"wss://meritdashboard.thedataworks.com\""},{"name":"WS_SOCKET","value":"\"wss://meritdashboard.thedataworks.com\""},{"name":"JOBFACTORY_HOST","value":"http://jobfactory"}],"image":"dwproductionus.azurecr.io/merit-dashboard:v1.20","imagePullPolicy":"Always","name":"meritdashboard","ports":[{"containerPort":80,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/data/files","name":"meritdashboard-data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"name":"meritdashboard-data","persistentVolumeClaim":{"claimName":"meritdashboard-data"}}]}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 2
    labels:
      app: meritdashboard
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: meritdashboard
    namespace: dataworks
    resourceVersion: "744274"
    uid: 0038d40b-e188-4976-b39c-902d6a61be38
  spec:
    podManagementPolicy: OrderedReady
    replicas: 0
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: meritdashboard
        tier: dataworks
    serviceName: meritdashboard
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: meritdashboard
          tier: dataworks
      spec:
        containers:
        - env:
          - name: PORT
            value: "3001"
          - name: MONGO_HOST
            value: mongodb
          - name: MONGO_PORT
            value: "27017"
          - name: MONGO_DB
            value: merit
          - name: PROXIES_FILE
            value: app/proxies.txt
          - name: DASHBOARD_HOST
            value: http://dashboard
          - name: CASSANDRA_HOST
            value: cassandra
          - name: CASSANDRA_KEYSPACE
            value: dataworks
          - name: MAX_GOROUTINES
            value: "50"
          - name: PULSAR_HOST
            value: pulsar:6650
          - name: FILE_SHARE
            value: /data/files
          - name: WS_HOST
            value: '"wss://meritdashboard.thedataworks.com"'
          - name: WS_SOCKET
            value: '"wss://meritdashboard.thedataworks.com"'
          - name: JOBFACTORY_HOST
            value: http://jobfactory
          image: dwproductionus.azurecr.io/merit-dashboard:v1.25
          imagePullPolicy: Always
          name: meritdashboard
          ports:
          - containerPort: 80
            protocol: TCP
          resources:
            limits:
              cpu: "2"
              memory: 2000Mi
            requests:
              cpu: 200m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data/files
            name: meritdashboard-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - name: meritdashboard-data
          persistentVolumeClaim:
            claimName: meritdashboard-data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentRevision: meritdashboard-dc85bb9d6
    observedGeneration: 2
    replicas: 0
    updateRevision: meritdashboard-dc85bb9d6
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"mongodb","tier":"dataworks"},"name":"mongo","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"mongodb","tier":"dataworks"}},"serviceName":"mongodb","template":{"metadata":{"labels":{"app":"mongodb","tier":"dataworks"}},"spec":{"containers":[{"env":[{"name":"ALLOW_EMPTY_PASSWORD","value":"yes"}],"image":"mongo","imagePullPolicy":"Always","name":"mongodb","ports":[{"containerPort":27017,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/data/db","name":"mongodb-data"}]}],"dnsPolicy":"ClusterFirst","initContainers":[{"command":["chown","-R","0999:0999","/data/db"],"image":"busybox","imagePullPolicy":"Always","name":"volume-permissions","resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/data/db","name":"mongodb-data"}]}],"restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"name":"mongodb-data","persistentVolumeClaim":{"claimName":"mongodb-data"}}]}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 4
    labels:
      app: mongodb
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: mongo
    namespace: dataworks
    resourceVersion: "762014"
    uid: ca4a6b13-0631-4722-bdf3-8a82a57efece
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: mongodb
        tier: dataworks
    serviceName: mongodb
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: mongodb
          tier: dataworks
      spec:
        containers:
        - env:
          - name: ALLOW_EMPTY_PASSWORD
            value: "yes"
          image: mongo
          imagePullPolicy: Always
          name: mongodb
          ports:
          - containerPort: 27017
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data/db
            name: mongodb-data
          - mountPath: /restored
            name: mongodb-data-restore
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - chown
          - -R
          - 0999:0999
          - /data/db
          image: busybox
          imagePullPolicy: Always
          name: volume-permissions
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data/db
            name: mongodb-data
          - mountPath: /restored
            name: mongodb-data-restore
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - name: mongodb-data
          persistentVolumeClaim:
            claimName: mongodb-data
        - name: mongodb-data-restore
          persistentVolumeClaim:
            claimName: mongodb-data-restore
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: mongo-776bc5788d
    observedGeneration: 4
    readyReplicas: 1
    replicas: 1
    updateRevision: mongo-776bc5788d
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 8
    labels:
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: notification-service
    namespace: dataworks
    resourceVersion: "761961"
    uid: c81931b8-0d30-4c20-b694-cec00f5b236e
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: notification-service
        tier: dataworks
    serviceName: notification-service
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: notification-service
          tier: dataworks
      spec:
        containers:
        - env:
          - name: PORT
            value: "1323"
          - name: POSTGRES_USER
            value: postgres
          - name: POSTGRES_PASSWORD
            value: postgres
          - name: POSTGRES_HOST
            value: postgres
          - name: POSTGRES_DB
            value: dataworks
          - name: POSTGRES_PORT
            value: "5432"
          image: dwproductioncentralus.azurecr.io/notification-service:1.0.9
          imagePullPolicy: Always
          name: notification-service
          ports:
          - containerPort: 80
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: notification-service-5d8744b6b5
    observedGeneration: 8
    readyReplicas: 1
    replicas: 1
    updateRevision: notification-service-5d8744b6b5
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"name":"postgres","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"postgres","tier":"dataworks"}},"serviceName":"postgres","template":{"metadata":{"labels":{"app":"postgres","tier":"dataworks"}},"spec":{"containers":[{"env":[{"name":"POSTGRES_USER","value":"postgres"},{"name":"POSTGRES_HOST","value":"postgres"},{"name":"POSTGRES_DB","value":"dataworks"},{"name":"POSTGRES_PASSWORD","value":"postgres"},{"name":"PGDATA","value":"/var/lib/postgresql/data/pgdata"}],"image":"postgres:11.8-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["sh","-c","exec pg_isready -U postgres"]},"failureThreshold":6,"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5},"name":"postgres","ports":[{"containerPort":5432,"name":"postgres","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["sh","-c","exec pg_isready -U postgres"]},"failureThreshold":3,"initialDelaySeconds":50,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"resources":{"requests":{"cpu":"100m","memory":"256Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/lib/postgresql/data","name":"postgres-data-disk"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"azureDisk":{"diskName":"postgres-pvc","diskURI":"/subscriptions/984ada39-0a0c-43d9-b0e2-1a029e17130a/resourceGroups/MC_DWProductionUS_DWProdUS_centralus/providers/Microsoft.Compute/disks/postgres-pvc","kind":"Managed"},"name":"postgres-data-disk"}]}}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 3
    labels:
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: postgres
    namespace: dataworks
    resourceVersion: "1289889"
    uid: e578a2c5-725a-44c8-b387-0bb01c490fa5
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: postgres
        tier: dataworks
    serviceName: postgres
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: postgres
          tier: dataworks
      spec:
        containers:
        - env:
          - name: POSTGRES_USER
            value: postgres
          - name: POSTGRES_HOST
            value: postgres
          - name: POSTGRES_DB
            value: dataworks
          - name: POSTGRES_PASSWORD
            value: postgres
          - name: PGDATA
            value: /var/lib/postgresql/data/pgdata
          image: postgres:11.8-alpine
          imagePullPolicy: IfNotPresent
          livenessProbe:
            exec:
              command:
              - sh
              - -c
              - exec pg_isready -U postgres
            failureThreshold: 6
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: postgres
          ports:
          - containerPort: 5432
            name: postgres
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - -c
              - exec pg_isready -U postgres
            failureThreshold: 3
            initialDelaySeconds: 50
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          resources:
            limits:
              cpu: "2"
              memory: 2000Mi
            requests:
              cpu: 200m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/postgresql/data
            name: postgres-data-disk
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureDisk:
            cachingMode: ReadWrite
            diskName: postgres-pvc
            diskURI: /subscriptions/6310f5e0-79d6-42a5-9e74-2628a74679aa/resourceGroups/MC_DWProductionUS_DWProdUS_centralus/providers/Microsoft.Compute/disks/postgres-pvc
            fsType: ext4
            kind: Managed
            readOnly: false
          name: postgres-data-disk
    updateStrategy:
      rollingUpdate:
        partition: 0
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: postgres-58dc599c66
    observedGeneration: 3
    readyReplicas: 1
    replicas: 1
    updateRevision: postgres-58dc599c66
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 6
    labels:
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: reminder-service
    namespace: dataworks
    resourceVersion: "761907"
    uid: 7018c557-c715-4cdd-ad25-9dfa3e7368db
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: reminder-service
        tier: dataworks
    serviceName: notification-service
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: reminder-service
          tier: dataworks
      spec:
        containers:
        - env:
          - name: PORT
            value: "1323"
          - name: POSTGRES_USER
            value: postgres
          - name: POSTGRES_PASSWORD
            value: postgres
          - name: POSTGRES_HOST
            value: postgres
          - name: POSTGRES_DB
            value: dataworks
          - name: POSTGRES_PORT
            value: "5432"
          image: dwproductioncentralus.azurecr.io/reminder-service:1.0.1
          imagePullPolicy: Always
          name: reminder-service
          ports:
          - containerPort: 80
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: reminder-service-7b766f756d
    observedGeneration: 6
    readyReplicas: 1
    replicas: 1
    updateRevision: reminder-service-7b766f756d
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 5
    labels:
      app: scheduler
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: scheduler
    namespace: dataworks
    resourceVersion: "761979"
    uid: c093fde7-602b-421b-b25a-8a020cc73564
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: scheduler
        tier: dataworks
    serviceName: scheduler
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: scheduler
          tier: dataworks
      spec:
        containers:
        - env:
          - name: PORT
            value: "3005"
          - name: GRPC_CRUD_SERVICE
            value: configdatamanagementservice
          - name: GRPC_CRUD_PORT
            value: "53001"
          - name: GRPC_JOBFACTORY_SERVICE
            value: jobfactory
          - name: GRPC_JOBFACTORY_PORT
            value: "53334"
          - name: REDIS_HOST
            value: redis
          - name: REDIS_PORT
            value: "80"
          - name: INDEXING_SERVICE
            value: indexingservice
          - name: INDEXING_PORT
            value: "51323"
          image: dwproductioncentralus.azurecr.io/scheduler:1.0.17
          imagePullPolicy: Always
          name: scheduler
          ports:
          - containerPort: 3334
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: scheduler-7f48687cb9
    observedGeneration: 5
    readyReplicas: 1
    replicas: 1
    updateRevision: scheduler-7f48687cb9
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 5
    labels:
      app: script-service
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: script-service
    namespace: dataworks
    resourceVersion: "761984"
    uid: 7afb35b7-703d-4b5a-ba70-69cb868a34d5
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: script-service
        tier: dataworks
    serviceName: script-service
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: script-service
          tier: dataworks
      spec:
        containers:
        - env:
          - name: FLASK_PORT
            value: "5000"
          - name: PG_HOST
            value: localhost
          - name: PG_PORT
            value: "5432"
          - name: PG_DB
            value: postgres
          - name: PG_USER
            value: postgres
          - name: PG_PASS
            value: postgres
          - name: FILE_PATH
            value: /data/csv
          - name: CRUD_SERVICE
            value: http://configdatamanagementservice
          image: dwproductioncentralus.azurecr.io/script-service:1.0.22
          imagePullPolicy: Always
          name: script-service
          ports:
          - containerPort: 80
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data
            name: data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - azureFile:
            secretName: dwk8sdatastorage-secret
            shareName: data
          name: data
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: script-service-64f768fdff
    observedGeneration: 5
    readyReplicas: 1
    replicas: 1
    updateRevision: script-service-64f768fdff
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app":"weaveworks","tier":"dataworks"},"name":"weaveworks","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"weaveworks","tier":"dataworks"}},"serviceName":"weaveworks","template":{"metadata":{"creationTimestamp":null,"labels":{"app":"weaveworks","tier":"dataworks"}},"spec":{"containers":[{"args":["--mode=app"],"command":["/home/weave/scope"],"image":"docker.io/weaveworks/scope:1.13.0","imagePullPolicy":"IfNotPresent","name":"weaveworks","ports":[{"containerPort":4040,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 4
    labels:
      app: weaveworks
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: weaveworks
    namespace: dataworks
    resourceVersion: "753457"
    uid: ba47800f-031c-4c9c-89d6-a10abbb1bf65
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: weaveworks
        tier: dataworks
    serviceName: weaveworks
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: weaveworks
          tier: dataworks
      spec:
        containers:
        - args:
          - --mode=app
          command:
          - /home/weave/scope
          image: docker.io/weaveworks/scope:1.13.0
          imagePullPolicy: IfNotPresent
          name: weaveworks
          ports:
          - containerPort: 4040
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: weaveworks-6d585f5854
    observedGeneration: 4
    readyReplicas: 1
    replicas: 1
    updateRevision: weaveworks-6d585f5854
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"generation":1,"labels":{"app":"weaveworks-cluster-agent","tier":"dataworks"},"name":"weaveworks-cluster-agent","namespace":"dataworks"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"weaveworks-cluster-agent","tier":"dataworks"}},"serviceName":"weaveworks-cluster-agent","template":{"metadata":{"creationTimestamp":null,"labels":{"app":"weaveworks-cluster-agent","tier":"dataworks"}},"spec":{"containers":[{"args":["--mode=probe","--probe-only","--probe.kubernetes.role=cluster","--probe.http.listen=:4041","--probe.publish.interval=4500ms","--probe.spy.interval=2s","weaveworks.dataworks.svc.cluster.local:80"],"command":["/home/weave/scope"],"image":"docker.io/weaveworks/scope:1.13.0","imagePullPolicy":"IfNotPresent","name":"scope-cluster-agent","ports":[{"containerPort":4041,"protocol":"TCP"}],"resources":{"requests":{"cpu":"25m","memory":"80Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"weaveworks","serviceAccountName":"weaveworks","terminationGracePeriodSeconds":30}},"updateStrategy":{"type":"RollingUpdate"}}}
    creationTimestamp: "2021-06-26T06:54:47Z"
    generation: 1
    labels:
      app: weaveworks-cluster-agent
      tier: dataworks
      velero.io/backup-name: dataworksns
      velero.io/restore-name: dataworksns-20210626065414
    name: weaveworks-cluster-agent
    namespace: dataworks
    resourceVersion: "675743"
    uid: f2db3c02-630d-4d7e-9d04-f20d8671db02
  spec:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: weaveworks-cluster-agent
        tier: dataworks
    serviceName: weaveworks-cluster-agent
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: weaveworks-cluster-agent
          tier: dataworks
      spec:
        containers:
        - args:
          - --mode=probe
          - --probe-only
          - --probe.kubernetes.role=cluster
          - --probe.http.listen=:4041
          - --probe.publish.interval=4500ms
          - --probe.spy.interval=2s
          - weaveworks.dataworks.svc.cluster.local:80
          command:
          - /home/weave/scope
          image: docker.io/weaveworks/scope:1.13.0
          imagePullPolicy: IfNotPresent
          name: scope-cluster-agent
          ports:
          - containerPort: 4041
            protocol: TCP
          resources:
            requests:
              cpu: 25m
              memory: 80Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: weaveworks
        serviceAccountName: weaveworks
        terminationGracePeriodSeconds: 30
    updateStrategy:
      type: RollingUpdate
  status:
    collisionCount: 0
    currentReplicas: 1
    currentRevision: weaveworks-cluster-agent-7548f9c5bf
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updateRevision: weaveworks-cluster-agent-7548f9c5bf
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
