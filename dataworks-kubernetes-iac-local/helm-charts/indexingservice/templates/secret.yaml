apiVersion: v1
kind: Secret
metadata:
  name: {{ include "indexingservice.fullname" . }}-secret
  labels:
    {{- include "indexingservice.labels" . | nindent 4 }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/version: {{ .Chart.Version }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
    app.kubernetes.io/contact: {{ .Values.labels.contact }}
    app.kubernetes.io/workload: {{ .Values.labels.workload }}
    app.kubernetes.io/env: {{ .Values.labels.env }}
    app.kubernetes.io/tier: {{ .Values.labels.tier }}
    app.kubernetes.io/project: {{ .Values.labels.project }}
type: opaque
data:
  postgres_password: {{ .Values.env.POSTGRES_USER | b64enc | quote }}
  postgres_user: {{ .Values.env.POSTGRES_PASSWORD  | b64enc | quote}}
  postgres_db: {{ .Values.env.POSTGRES_DB | b64enc | quote}}

